<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Akun | Libra (Library Area)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="stylesheet" href="css/auth.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'primary': '#4f46e5', 'secondary': '#10b981' }
                }
            }
        }
    </script>
    <script src="js/script.js"></script> 
    <script>
        // Konfigurasi Proyek LIBRA
        const firebaseConfig = {
            apiKey: "AIzaSyCdVYKc6waij3pmxI9dLDSBIgbYiFIRr3A",
            authDomain: "libra-library-area.firebaseapp.com",
            databaseURL: "https://libra-library-area-default-rtdb.asia-southeast1.firebasedatabase.app", 
            projectId: "libra-library-area",
            storageBucket: "libra-library-area.firebasestorage.app",
            messagingSenderId: "455509444693",
            appId: "1:455509444693:web:883766ec8a49032f0b2cdc",
        };
        firebase.initializeApp(firebaseConfig);
        const dbRef = firebase.database().ref(); 
    </script>
</head>
<body id="daftar-page" class="auth-container">
    <div class="auth-card">
        <h2>Daftar Akun Baru</h2>

        <div id="step1">
            <h3 class="text-lg font-semibold mb-3 text-center">Langkah 1: Data Diri & Foto Profil</h3>
            <form id="registration-step1">
                <div class="profile-upload-area">
                    <img id="foto-preview" src="img/default_user.png" alt="Foto Profil" class="profile-preview">
                    <input type="file" id="foto-upload" accept="image/*" class="p-2 border rounded-lg w-full max-w-[200px]" required>
                    <input type="hidden" id="profile_picture_data" name="profile_picture_data">
                </div>
                
                <input type="text" id="nama" name="nama" placeholder="Nama Lengkap" required>
                <input type="text" id="alamat" name="alamat" placeholder="Alamat Lengkap" required>
                <input type="tel" id="nohp" name="nohp" placeholder="Nomor Handphone (08...)" required>
                <input type="email" id="email" name="email" placeholder="Email" required>
                
                <button type="submit" class="auth-btn-primary" id="btn-lanjut-step1">
                    Lanjut & Kirim Kode Verifikasi
                </button>
            </form>
        </div>

        <div id="step2" style="display: none;">
            <h3 class="text-lg font-semibold mb-3 text-center">Langkah 2: Verifikasi Kode OTP</h3>
            <p class="text-center text-sm text-gray-500 mb-4" id="otp-info">Kode OTP telah dikirim ke email Anda.</p>
            <form id="registration-step2">
                <input type="text" id="otp_code" name="otp_code" placeholder="Kode OTP (6 Digit)" maxlength="6" required>
                
                <button type="button" id="btn-resend-otp" class="otp-resend-btn" style="padding: 0; margin-top: 0.5rem;">
                    Kirim Ulang Kode (120s)
                </button>
                
                <button type="submit" class="auth-btn-primary" style="margin-top: 1.5rem;">
                    Verifikasi & Lanjut
                </button>
            </form>
            <div class="auth-link-text">
                <a href="#" onclick="document.getElementById('step1').style.display='block'; document.getElementById('step2').style.display='none'; if(otpCountdownTimer) clearInterval(otpCountdownTimer); return false;">
                    &larr; Kembali ke Langkah sebelumnya
                </a>
            </div>
        </div>

        <div id="step3" style="display: none;">
            <h3 class="text-lg font-semibold mb-3 text-center">Langkah 3: Masukkan Username dan Password</h3>
            <form id="registration-step3">
                <input type="text" id="username_reg" name="username" placeholder="Username (Untuk Login)" required>
                <input type="password" id="password_reg" name="password" placeholder="Password" required>
                <input type="password" id="confirm_password" name="confirm_password" placeholder="Konfirmasi Password" required>
                
                <button type="submit" class="auth-btn-primary">
                    Selesaikan Pendaftaran
                </button>
            </form>
            <div class="auth-link-text">
                <a href="#" onclick="document.getElementById('step2').style.display='block'; document.getElementById('step3').style.display='none'; return false;">
                    &larr; Kembali ke Langkah sebelumnya
                </a>
            </div>
        </div>
        
        <div class="auth-link-text mt-5">
            Sudah punya akun? <a href="login.html">Login sekarang</a>
        </div>
    </div>
</body>
</html>